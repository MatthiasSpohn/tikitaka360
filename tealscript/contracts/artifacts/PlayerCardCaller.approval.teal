#pragma version 10

// This TEAL was generated by TEALScript v0.90.3
// https://github.com/algorandfoundation/TEALScript

// This contract is compliant with and/or implements the following ARCs: [ ARC4 ]

// The following ten lines of TEAL handle initial program flow
// This pattern is used to make it easy for anyone to parse the start of the program and determine if a specific action is allowed
// Here, action refers to the OnComplete in combination with whether the app is being created or called
// Every possible action for this contract is represented in the switch statement
// If the action is not implemented in the contract, its respective branch will be "*NOT_IMPLEMENTED" which just contains "err"
txn ApplicationID
!
int 6
*
txn OnCompletion
+
switch *call_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *create_NoOp *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED *NOT_IMPLEMENTED

*NOT_IMPLEMENTED:
	err

// bootstrap()uint64
*abi_route_bootstrap:
	// The ABI return prefix
	byte 0x151f7c75

	// execute bootstrap()uint64
	callsub bootstrap
	itob
	concat
	log
	int 1
	return

// bootstrap(): AssetID
bootstrap:
	proto 0 1

	// Push empty bytes after the frame pointer to reserve space for local variables
	byte 0x

	// contracts/PlayerCard.algo.ts:145
	// verifyTxn(this.txn, { sender: this.app.creator })
	// verify sender
	txn Sender
	txna Applications 0
	app_params_get AppCreator
	pop
	==
	assert

	// contracts/PlayerCard.algo.ts:146
	// assert(!this.tokenID.exists)
	txna Applications 0
	byte 0x746f6b656e4944 // "tokenID"
	app_global_get_ex
	swap
	pop
	!
	assert

	// contracts/PlayerCard.algo.ts:147
	// registeredAsa = sendAssetCreation({
	//       configAssetName: 'TikiTaka360-Token',
	//       configAssetUnitName: 'TT360',
	//       configAssetTotal: 10_000_000_000,
	//       configAssetDecimals: 2,
	//       configAssetManager: this.app.address,
	//       configAssetFreeze: this.app.address,
	//       configAssetClawback: this.app.address,
	//       configAssetReserve: this.app.address,
	//     })
	itxn_begin
	int acfg
	itxn_field TypeEnum

	// contracts/PlayerCard.algo.ts:148
	// configAssetName: 'TikiTaka360-Token'
	byte 0x54696b6954616b613336302d546f6b656e // "TikiTaka360-Token"
	itxn_field ConfigAssetName

	// contracts/PlayerCard.algo.ts:149
	// configAssetUnitName: 'TT360'
	byte 0x5454333630 // "TT360"
	itxn_field ConfigAssetUnitName

	// contracts/PlayerCard.algo.ts:150
	// configAssetTotal: 10_000_000_000
	int 10_000_000_000
	itxn_field ConfigAssetTotal

	// contracts/PlayerCard.algo.ts:151
	// configAssetDecimals: 2
	int 2
	itxn_field ConfigAssetDecimals

	// contracts/PlayerCard.algo.ts:152
	// configAssetManager: this.app.address
	global CurrentApplicationAddress
	itxn_field ConfigAssetManager

	// contracts/PlayerCard.algo.ts:153
	// configAssetFreeze: this.app.address
	global CurrentApplicationAddress
	itxn_field ConfigAssetFreeze

	// contracts/PlayerCard.algo.ts:154
	// configAssetClawback: this.app.address
	global CurrentApplicationAddress
	itxn_field ConfigAssetClawback

	// contracts/PlayerCard.algo.ts:155
	// configAssetReserve: this.app.address
	global CurrentApplicationAddress
	itxn_field ConfigAssetReserve

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit
	itxn CreatedAssetID
	frame_bury 0 // registeredAsa: uint64

	// contracts/PlayerCard.algo.ts:157
	// this.tokenID.value = registeredAsa
	byte 0x746f6b656e4944 // "tokenID"
	frame_dig 0 // registeredAsa: uint64
	app_global_put

	// contracts/PlayerCard.algo.ts:158
	// return registeredAsa;
	frame_dig 0 // registeredAsa: uint64

	// set the subroutine return value
	frame_bury 0
	retsub

// mintAndGetApp(string,string,string,address,address,uint64)uint64
*abi_route_mintAndGetApp:
	// The ABI return prefix
	byte 0x151f7c75

	// total: uint64
	txna ApplicationArgs 6
	btoi

	// reserve: address
	txna ApplicationArgs 5
	dup
	len
	int 32
	==
	assert

	// manager: address
	txna ApplicationArgs 4
	dup
	len
	int 32
	==
	assert

	// url: string
	txna ApplicationArgs 3
	extract 2 0

	// unitName: string
	txna ApplicationArgs 2
	extract 2 0

	// name: string
	txna ApplicationArgs 1
	extract 2 0

	// execute mintAndGetApp(string,string,string,address,address,uint64)uint64
	callsub mintAndGetApp
	itob
	concat
	log
	int 1
	return

// mintAndGetApp(name: string, unitName: string, url: string, manager: Address, reserve: Address, total: uint64): uint64
mintAndGetApp:
	proto 6 1

	// Push empty bytes after the frame pointer to reserve space for local variables
	byte 0x

	// contracts/PlayerCard.algo.ts:169
	// sendMethodCall<typeof PlayerCard.prototype.createApplication>({
	//       clearStateProgram: PlayerCard.clearProgram(),
	//       approvalProgram: PlayerCard.approvalProgram(),
	//       globalNumUint: 5,
	//       localNumUint: 1,
	//     })
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "createApplication()void"
	itxn_field ApplicationArgs

	// contracts/PlayerCard.algo.ts:170
	// clearStateProgram: PlayerCard.clearProgram()
	byte b64 Cg==
	itxn_field ClearStateProgram

	// contracts/PlayerCard.algo.ts:171
	// approvalProgram: PlayerCard.approvalProgram()
	byte b64 CiAEAAEEICYJAXIBYwF0AXABbgFsBBUffHUABAGjo/8xGBSBBgsxGQiNDAH2AjAAAAAAAAAAAAHoAAAAAAAAAAAAAACKAwCxJLIQi/+yFIv+shGL/bISIrIBs4mKAQAii/8yCoj/3YmIAAIjQ4oAACgiZykiZysiZycEImcqImeJNhoBF4gAAiNDigEAKov/Z4v/iP/GiYgAAiNDigAAMQAnBSJmiScGNhoGFzYaBUkVJRJENhoESRUlEkQ2GgNXAgA2GgJXAgA2GgFXAgCIAAUWULAjQ4oGAScHsYEDshCL/7Imi/6yJYv9sieL/LIpi/uyKiKyI4v6siIisiQisgGztDyMACcEiwBniwCMAIknBjYaAReIAAUWULAjQ4oBAScHRwIxADYyAGFEMQAqZHAATEhEKGSMAClkjAExACcFYowCiwIiEkEAEIEKgegHKWQJCypkMQCI/umLAiINQQAgiwEjCYwBiwEiEkEABigiZ0IADSiLAIsBC4sCCYsBCmcpiwEjCGcxACcFi/9mKIsAiwELi/8IKWQKZyuBkKEPKWQLZyhkjABGAokxFiMJSTgQJBJEiAACI0OKAQCL/zgUMQASRIv/OBIiDkSJMRYjCUk4ECQSRIgAAiNDigEAi/84FDEAEkSL/zgSIg5EiTEWIwlJOBAjEkSIAAIjQ4oBAIv/OAc2MgByB0gSRIv/OAgrZA9EsSSyECcEZLIRI7ISMQCyFCKyAbOJgAS4RHs2NhoAjgH+MACABFgdXlcnCIAE+FGOc4AEZskaU4AEAUh1nYAEYAhYk4AE2n/BCjYaAI4H/g/+Jf40/p7/Ov9c/34AJwg2GgCOAf4bAA==
	itxn_field ApprovalProgram

	// contracts/PlayerCard.algo.ts:172
	// globalNumUint: 5
	int 5
	itxn_field GlobalNumUint

	// contracts/PlayerCard.algo.ts:173
	// localNumUint: 1
	int 1
	itxn_field LocalNumUint

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/PlayerCard.algo.ts:176
	// factoryApp: AppID = this.itxn.createdApplicationID
	itxn CreatedApplicationID
	frame_bury 0 // factoryApp: AppID

	// contracts/PlayerCard.algo.ts:178
	// sendPayment({
	//       amount: 500_000,
	//       receiver: factoryApp.address,
	//     })
	itxn_begin
	int pay
	itxn_field TypeEnum

	// contracts/PlayerCard.algo.ts:179
	// amount: 500_000
	int 500_000
	itxn_field Amount

	// contracts/PlayerCard.algo.ts:180
	// receiver: factoryApp.address
	frame_dig 0 // factoryApp: AppID
	app_params_get AppAddress
	pop
	itxn_field Receiver

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/PlayerCard.algo.ts:183
	// sendMethodCall<typeof PlayerCard.prototype.createNFT>({
	//       applicationID: factoryApp,
	//       methodArgs: [name, unitName, url, manager, reserve, total],
	//     })
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "createNFT(string,string,string,address,address,uint64)uint64"
	itxn_field ApplicationArgs

	// contracts/PlayerCard.algo.ts:184
	// applicationID: factoryApp
	frame_dig 0 // factoryApp: AppID
	itxn_field ApplicationID

	// contracts/PlayerCard.algo.ts:185
	// methodArgs: [name, unitName, url, manager, reserve, total]
	frame_dig -1 // name: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -2 // unitName: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -3 // url: string
	dup
	len
	itob
	extract 6 2
	swap
	concat
	itxn_field ApplicationArgs
	frame_dig -4 // manager: Address
	itxn_field ApplicationArgs
	frame_dig -5 // reserve: Address
	itxn_field ApplicationArgs
	frame_dig -6 // total: uint64
	itob
	itxn_field ApplicationArgs

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit
	itxn NumLogs
	int 1
	-
	itxnas Logs
	extract 4 0
	btoi

	// contracts/PlayerCard.algo.ts:188
	// return factoryApp.id;
	frame_dig 0 // factoryApp: AppID

	// set the subroutine return value
	frame_bury 0
	retsub

// fundFactoryApp(address,uint64,uint64)void
*abi_route_fundFactoryApp:
	// amount: uint64
	txna ApplicationArgs 3
	btoi

	// appid: uint64
	txna ApplicationArgs 2
	btoi

	// address: address
	txna ApplicationArgs 1
	dup
	len
	int 32
	==
	assert

	// execute fundFactoryApp(address,uint64,uint64)void
	callsub fundFactoryApp
	int 1
	return

// fundFactoryApp(address: Address, appid: uint64, amount: uint64): void
fundFactoryApp:
	proto 3 0

	// contracts/PlayerCard.algo.ts:192
	// sendMethodCall<typeof PlayerCard.prototype.optInToToken>({
	//       applicationID: AppID.fromUint64(appid),
	//       methodArgs: [this.tokenID.value],
	//     })
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "optInToToken(uint64)void"
	itxn_field ApplicationArgs

	// contracts/PlayerCard.algo.ts:193
	// applicationID: AppID.fromUint64(appid)
	frame_dig -2 // appid: uint64
	itxn_field ApplicationID

	// contracts/PlayerCard.algo.ts:194
	// methodArgs: [this.tokenID.value]
	byte 0x746f6b656e4944 // "tokenID"
	app_global_get
	itob
	itxn_field ApplicationArgs

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit

	// contracts/PlayerCard.algo.ts:198
	// sendAssetTransfer({
	//       xferAsset: this.tokenID.value,
	//       assetAmount: amount,
	//       assetReceiver: address,
	//     })
	itxn_begin
	int axfer
	itxn_field TypeEnum

	// contracts/PlayerCard.algo.ts:199
	// xferAsset: this.tokenID.value
	byte 0x746f6b656e4944 // "tokenID"
	app_global_get
	itxn_field XferAsset

	// contracts/PlayerCard.algo.ts:200
	// assetAmount: amount
	frame_dig -3 // amount: uint64
	itxn_field AssetAmount

	// contracts/PlayerCard.algo.ts:201
	// assetReceiver: address
	frame_dig -1 // address: Address
	itxn_field AssetReceiver

	// Fee field not set, defaulting to 0
	int 0
	itxn_field Fee

	// Submit inner transaction
	itxn_submit
	retsub

// createScoreBox()void
*abi_route_createScoreBox:
	// execute createScoreBox()void
	callsub createScoreBox
	int 1
	return

// createScoreBox(): void
createScoreBox:
	proto 0 0

	// contracts/PlayerCard.algo.ts:207
	// assert(this.txn.sender === this.app.address)
	txn Sender
	global CurrentApplicationAddress
	==
	assert

	// contracts/PlayerCard.algo.ts:208
	// assert(!this.scoreBox(this.txn.sender).exists)
	byte 0x7362 // "sb"
	txn Sender
	concat
	box_len
	swap
	pop
	!
	assert

	// contracts/PlayerCard.algo.ts:210
	// this.scoreBox(this.txn.sender).value = {
	//       scoutingPoints: 0,
	//       challengePoints: 0,
	//     }
	byte 0x7362 // "sb"
	txn Sender
	concat
	byte 0x00000000000000000000000000000000
	box_put
	retsub

// updateScoreBox(address,uint64,uint64)void
*abi_route_updateScoreBox:
	// cp: uint64
	txna ApplicationArgs 3
	btoi

	// sp: uint64
	txna ApplicationArgs 2
	btoi

	// address: address
	txna ApplicationArgs 1
	dup
	len
	int 32
	==
	assert

	// execute updateScoreBox(address,uint64,uint64)void
	callsub updateScoreBox
	int 1
	return

// updateScoreBox(address: Address, sp: uint64, cp: uint64): void
updateScoreBox:
	proto 3 0

	// Push empty bytes after the frame pointer to reserve space for local variables
	byte 0x
	dup

	// contracts/PlayerCard.algo.ts:217
	// assert(this.txn.sender === this.app.address)
	txn Sender
	global CurrentApplicationAddress
	==
	assert

	// contracts/PlayerCard.algo.ts:218
	// assert(this.scoreBox(address).exists)
	byte 0x7362 // "sb"
	frame_dig -1 // address: Address
	concat
	box_len
	swap
	pop
	assert

	// contracts/PlayerCard.algo.ts:220
	// currentScoutingPoints = this.scoreBox(address).value.scoutingPoints
	int 0
	int 8
	byte 0x7362 // "sb"
	frame_dig -1 // address: Address
	concat
	cover 2
	box_extract
	btoi
	frame_bury 0 // currentScoutingPoints: uint64

	// contracts/PlayerCard.algo.ts:221
	// currentChallengePoints = this.scoreBox(address).value.challengePoints
	int 8 // headOffset
	int 8
	byte 0x7362 // "sb"
	frame_dig -1 // address: Address
	concat
	cover 2
	box_extract
	btoi
	frame_bury 1 // currentChallengePoints: uint64

	// contracts/PlayerCard.algo.ts:223
	// this.scoreBox(address).value = {
	//       scoutingPoints: currentScoutingPoints + sp,
	//       challengePoints: currentChallengePoints + cp,
	//     }
	byte 0x7362 // "sb"
	frame_dig -1 // address: Address
	concat
	frame_dig 0 // currentScoutingPoints: uint64
	frame_dig -2 // sp: uint64
	+
	itob
	frame_dig 1 // currentChallengePoints: uint64
	frame_dig -3 // cp: uint64
	+
	itob
	concat
	box_put
	retsub

*abi_route_createApplication:
	int 1
	return

*create_NoOp:
	method "createApplication()void"
	txna ApplicationArgs 0
	match *abi_route_createApplication
	err

*call_NoOp:
	method "bootstrap()uint64"
	method "mintAndGetApp(string,string,string,address,address,uint64)uint64"
	method "fundFactoryApp(address,uint64,uint64)void"
	method "createScoreBox()void"
	method "updateScoreBox(address,uint64,uint64)void"
	txna ApplicationArgs 0
	match *abi_route_bootstrap *abi_route_mintAndGetApp *abi_route_fundFactoryApp *abi_route_createScoreBox *abi_route_updateScoreBox
	err